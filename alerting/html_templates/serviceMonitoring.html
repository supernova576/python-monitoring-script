
<!doctype html>
<html lang="de">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ report_title | default('Service Monitoring Report') }}</title>
		<style>
			/* Simple, email-friendly styling */
			body { font-family: Arial, Helvetica, sans-serif; margin:0; padding:20px; background:#f4f6f8; color:#333; }
			.container { max-width:800px; margin:0 auto; background:#ffffff; border-radius:6px; box-shadow:0 2px 4px rgba(0,0,0,0.06); overflow:hidden }
			header { padding:20px 24px; border-bottom:1px solid #eee; background:linear-gradient(90deg,#0b6ea8,#0f9bd6); color:#fff }
			header h1 { margin:0; font-size:20px; font-weight:600 }
			header p { margin:6px 0 0 0; font-size:13px; opacity:0.92 }
			.content { padding:18px 24px }
			.summary { margin-bottom:12px; font-size:14px }
			.count { font-weight:700; color:#c92424 }
			.ok { color: #1a8a3e; font-weight:700 }
			table { width:100%; border-collapse:collapse; margin-top:12px }
			th, td { text-align:left; padding:10px 8px; border-bottom:1px solid #eee; font-size:13px }
			th { background:#fafafa; font-weight:600; font-size:13px }
			.service-name { font-weight:700 }
			.muted { color:#666; font-size:12px }
			.badge { display:inline-block; padding:4px 8px; border-radius:12px; font-size:12px; color:#fff }
			.badge-inactive { background:#c92424 }
			.badge-warning { background:#e18b00 }
			.footer { padding:14px 24px; font-size:12px; color:#666; border-top:1px solid #eee; background:#fafafa }
			a { color:#0f9bd6; text-decoration:none }
			@media (max-width:600px) { th, td { display:block; width:100% } table { border:0 } }
		</style>
	</head>
	<body>
		<div class="container">
			<header>
				<h1>{{ report_title | default('Inaktive Services') }}</h1>
				<p>Erstellt: {{ generated_at | default("-") }}</p>
			</header>

			<div class="content">
				{% set count = (inactive_services | length) if inactive_services is defined else 0 %}
				<div class="summary">
					{% if count > 0 %}
						<span class="count">{{ count }}</span> inaktive {{ 'Service' if count == 1 else 'Services' }} gefunden.
					{% else %}
						<span class="ok">Alle überwachten Services sind aktiv.</span>
					{% endif %}
				</div>

				{% if count > 0 %}
					<table role="presentation">
						<thead>
							<tr>
								<th>Service</th>
								<th>Host</th>
								<th>Letzte Änderung</th>
								<th>Status</th>
							</tr>
						</thead>
						<tbody>
							{% for s in inactive_services %}
							<tr>
								<td>
									<div class="service-name">{{ s.name }}</div>
									{% if s.description %}<div class="muted">{{ s.description }}</div>{% endif %}
								</td>
								<td>
									{{ s.host }}
									{% if s.url %}<div class="muted"><a href="{{ s.url }}">Link</a></div>{% endif %}
								</td>
								<td>
									{% if s.last_seen %}{{ s.last_seen }}{% else %}<span class="muted">-</span>{% endif %}
								</td>
								<td>
									<div class="badge badge-inactive">{{ s.last_state | default('inactive') }}</div>
									{% if s.check_command %}<div class="muted">{{ s.check_command }}</div>{% endif %}
								</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				{% endif %}
			</div>

			<div class="footer">
				<div>Dies ist eine automatisch generierte Meldung vom Monitoring-System.</div>
				{% if footer_note %}<div class="muted">{{ footer_note }}</div>{% endif %}
			</div>
		</div>
	</body>
</html>
